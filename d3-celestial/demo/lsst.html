<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <title>D3-Celestial Star Map</title>
  <script type="text/javascript" src="../lib/d3.min.js"></script>
  <script type="text/javascript" src="../lib/d3.geo.projection.min.js"></script>
  <script type="text/javascript" src="../celestial.js"></script>
  <link rel="stylesheet" href="../celestial.css">
</head><body>
<script type="text/javascript">
/* D3-Celestial sky map
   Copyright 2015 Olaf Frohn https://github.com/ofrohn, see LICENSE
   
   Edit configuration to your liking and display in browser. 
   Data files in folder data for stars and DSOs, number indicates limit magnitude, 
   or roll your own with the format template in templ.json
*/
var config = {
  width: 0,     // Default width, 0 = full parent width; height is determined by projection
  projection: "aitoff",  // Map projection used: airy, aitoff, armadillo, august, azimuthalEqualArea, azimuthalEquidistant, 
  //baker, berghaus, boggs, bonne, bromley, collignon, craig, craster, cylindricalEqualArea, cylindricalStereographic, eckert1, eckert2, 
  //eckert3, eckert4, eckert5, eckert6, eisenlohr, equirectangular, fahey, foucaut, ginzburg4, ginzburg5, ginzburg6, ginzburg8, ginzburg9, 
  //gringorten, hammer, hatano, healpix, hill, homolosine, kavrayskiy7, lagrange, larrivee, laskowski, loximuthal, mercator, miller, mollweide, 
  //mtFlatPolarParabolic, mtFlatPolarQuartic, mtFlatPolarSinusoidal, naturalEarth, nellHammer, orthographic, patterson, polyconic, 
  //rectangularPolyconic, robinson, sinusoidal, stereographic, times, twoPointEquidistant, vanDerGrinten, vanDerGrinten2, vanDerGrinten3, 
  //vanDerGrinten4, wagner4, wagner6, wagner7, wiechel, winkel3
  transform: "equatorial", // Coordinate transformation: equatorial (default), ecliptic, galactic, supergalactic
  center: null,       // Initial center coordinates in equatorial transformation [hours, degrees, degrees], 
                      // otherwise [degrees, degrees, degrees], 3rd parameter is orientation, null = default center
  orientationfixed: true,  // Keep orientation angle the same as center[2]
  background: { fill: "#000000", stroke: "#000000", opacity: 1 }, // Background style
  adaptable: true,    // Sizes are increased with higher zoom-levels
  interactive: true,  // Enable zooming and rotation with mousewheel and dragging
  form: false,        // Display settings form
  location: false,    // Display location settings 
  controls: false,     // Display zoom controls
  lang: "",           // Language for names, so far only for constellations: de: german, es: spanish
                      // Default:en or empty string for english
  container: "celestial-map",   // ID of parent element, e.g. div
  datapath: "../data/",  // Path/URL to data files, empty = subfolder 'data'
  polygons: {
    show: true,    // Show grid polygons
    style: { fill: "#ff00ff", opacity: 0.45 }
  },
  lines: {
    graticule: { show: true, stroke: "#cccccc", width: 0.6, opacity: 0.8,      // Show graticule lines 
			// grid values: "outline", "center", or [lat,...] specific position
      lon: {pos: ["center"], fill: "#eee", font: "0.8em Helvetica, Arial, sans-serif"}, 
			// grid values: "outline", "center", or [lon,...] specific position
		  lat: {pos: ["center"], fill: "#eee", font: "0.8em Helvetica, Arial, sans-serif"}},
    equatorial: { show: false, stroke: "#aaaaaa", width: 2.3, opacity: 0.7 },    // Show equatorial plane 
    ecliptic: { show: false, stroke: "#66cc66", width: 2.3, opacity: 0.7 },      // Show ecliptic plane 
    galactic: { show: false, stroke: "#cc6666", width: 3.3, opacity: 0.7 },     // Show galactic plane 
    supergalactic: { show: false, stroke: "#cc66cc", width: 1.3, opacity: 0.7 } // Show supergalactic plane 
  },
  telescopeRange: {
    show: true, dash: [10, 10], stroke:"#cccccc", width: 2.3, opacity: 0.7
  },
  horizon: {  //Show horizon marker, if geo-position is set
    show: false, 
    stroke: "#FF0000", // Line
    width: 10.0, 
    fill: "#FF0000", // Area below horizon
    opacity: 0.9
  },  
  moon: {
    show: true,
    pos : [30, 315],
    style: { fill: "#eeeeee", opacity: "1.0" }
  }
};


var data = [
  {
    "count": 4,
    "fieldRA": -40,
    "fieldID": 39,
    "fieldDec": -20,
    "filterName": "z"
  },
  {
    "count": 4,
    "fieldRA": -5,
    "fieldID": 39,
    "fieldDec": -20,
    "filterName": "z"
  },
  {
    "count": 4,
    "fieldRA": -10,
    "fieldID": 39,
    "fieldDec": -20,
    "filterName": "z"
  },
  {
    "count": 4,
    "fieldRA": -15,
    "fieldID": 39,
    "fieldDec": -20,
    "filterName": "z"
  },
  {
    "count": 4,
    "fieldRA": -20,
    "fieldID": 390,
    "fieldDec": -20,
    "filterName": "z"
  },
  {
    "count": 4,
    "fieldRA": -25,
    "fieldID": 390,
    "fieldDec": -20,
    "filterName": "z"
  },
  {
    "count": 4,
    "fieldRA": 335,
    "fieldID": 390,
    "fieldDec": -20,
    "filterName": "z"
  }
];

Celestial.display(config);
console.log(Celestial)
var step = 1.6;
var tileN = 0;
function animate() {
  reqID = window.requestAnimationFrame(animate);
  var rot = Celestial.rotate();
  rot[0] = rot[0] === 180 - step ? -180 : rot[0] + step;
  rot[2] = 0;
  // Celestial.rotate({center:rot});
  // Celestial.updateCell(Math.floor(Math.random()*857));
  // Celestial.updateCell((tileN++)%857);
}
setTimeout(function(){
  Celestial.updateCells(data);
}, 1000)
  d3.select('#celestial-map').on('mousedown', function() { window.cancelAnimationFrame(reqID) } )
  d3.select('#celestial-map').on('mouseup', function() { window.requestAnimationFrame(animate) } )

reqID = window.requestAnimationFrame(animate);
</script>
<!--<footer style="position:absolute; bottom:0; width:99%">
<p><a href="https://github.com/ofrohn/d3-celestial"><b>D3-Celestial</b></a> released under <a href="http://opensource.org/licenses/BSD-3-Clause">BSD license</a>. 
Copyright 2015-16 <a href="http://armchairastronautics.blogspot.com/" rel="author">Olaf Frohn</a>.
</p>
</footer>-->
</body>
</html>